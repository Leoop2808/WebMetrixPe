@using WebMetrixPe.Entities.ViewModels;
@using System.Net;
@model VMInicioSesion
@{
    Layout = "~/Views/Shared/LoginMaster.cshtml";
}

<style>
    :root {
        --blue: #5e72e4;
        --indigo: #6610f2;
        --purple: #6f42c1;
        --pink: #e83e8c;
        --red: #ee3232;
        --orange: #f90;
        --yellow: #fffa6f;
        --green: #297f00;
        --teal: #20c997;
        --cyan: #3065d0;
        --white: #fff;
        --gray: #6c757d;
        --gray-dark: #343a40;
        --primary: #fe634e;
        --secondary: #707070;
        --success: #2bc155;
        --info: #2421da;
        --warning: #ff6d4d;
        --danger: #ff4847;
        --light: #f4f5f9;
        --dark: #b1b1b1;
        --breakpoint-xs: 0;
        --breakpoint-sm: 576px;
        --breakpoint-md: 768px;
        --breakpoint-lg: 992px;
        --breakpoint-xl: 1200px;
        --breakpoint-xxl: 1440;
        --font-family-sans-serif: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
        --font-family-monospace: SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace
    }

    *, *::before, *::after {
        box-sizing: border-box
    }

    html {
        font-family: sans-serif;
        line-height: 1.15;
        -webkit-text-size-adjust: 100%
    }

    body {
        margin: 0;
        font-family: "Roboto",sans-serif;
        font-size: .875rem;
        font-weight: 400;
        line-height: 1.5;
        color: #7e7e7e;
        text-align: left;
        background-color: #f4f6fa
    }

    h4 {
        margin-top: 0;
        margin-bottom: .5rem
    }

    strong {
        font-weight: bolder
    }

    a {
        color: #fe634e;
        text-decoration: none;
        background-color: transparent
    }

    img {
        vertical-align: middle;
        border-style: none
    }

    label {
        display: inline-block;
        margin-bottom: .5rem
    }

    input {
        margin: 0;
        font-family: inherit;
        font-size: inherit;
        line-height: inherit
    }

    input {
        overflow: visible
    }

        input[type="checkbox"] {
            box-sizing: border-box;
            padding: 0
        }

    ::-webkit-file-upload-button {
        font: inherit;
        -webkit-appearance: button
    }

    h4 {
        margin-bottom: .5rem;
        font-weight: 500;
        line-height: 1.2;
        color: #3d4465
    }

    h4 {
        font-size: 1.125rem
    }

    .container {
        width: 100%;
        padding-right: 15px;
        padding-left: 15px;
        margin-right: auto;
        margin-left: auto
    }

    @@media (min-width:576px) {
        .container {
            max-width: 540px
        }
    }

    @@media (min-width:768px) {
        .container {
            max-width: 720px
        }
    }

    @@media (min-width:992px) {
        .container {
            max-width: 960px
        }
    }

    @@media (min-width:1200px) {
        .container {
            max-width: 1140px
        }
    }

    .row {
        display: flex;
        flex-wrap: wrap;
        margin-right: -15px;
        margin-left: -15px
    }

    .no-gutters {
        margin-right: 0;
        margin-left: 0
    }

        .no-gutters > [class*="col-"] {
            padding-right: 0;
            padding-left: 0
        }

    .col-md-6, .col-xl-12 {
        position: relative;
        width: 100%;
        padding-right: 15px;
        padding-left: 15px
    }

    @@media (min-width:768px) {
        .col-md-6 {
            flex: 0 0 50%;
            max-width: 50%
        }
    }

    @@media (min-width:1200px) {
        .col-xl-12 {
            flex: 0 0 100%;
            max-width: 100%
        }
    }

    .form-control {
        display: block;
        width: 100%;
        height: calc(1.5em + .75rem + 2px);
        padding: .375rem .75rem;
        font-size: .875rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #f0f1f5;
        border-radius: .75rem
    }

        .form-control::-ms-expand {
            background-color: transparent;
            border: 0
        }

        .form-control:-moz-focusring {
            color: transparent;
            text-shadow: 0 0 0 #495057
        }

    .form-group {
        margin-bottom: 1rem
    }

    .form-row {
        display: flex;
        flex-wrap: wrap;
        margin-right: -5px;
        margin-left: -5px
    }

    .btn {
        display: inline-block;
        font-weight: 400;
        color: #7e7e7e;
        text-align: center;
        vertical-align: middle;
        background-color: transparent;
        border: 1px solid transparent;
        padding: .375rem .75rem;
        font-size: .875rem;
        line-height: 1.5;
        border-radius: .75rem
    }

    .btn-block {
        display: block;
        width: 100%
    }

    .custom-control {
        position: relative;
        z-index: 1;
        display: block;
        min-height: 1.3125rem;
        padding-left: 1.5rem;
        color-adjust: exact
    }

    .custom-control-input {
        position: absolute;
        left: 0;
        z-index: -1;
        width: 1rem;
        height: 1.15625rem;
        opacity: 0
    }

    .custom-control-label {
        position: relative;
        margin-bottom: 0;
        vertical-align: top
    }

        .custom-control-label::before {
            position: absolute;
            top: .15625rem;
            left: -1.5rem;
            display: block;
            width: 1rem;
            height: 1rem;
            content: "";
            background-color: #fff;
            border: #adb5bd solid 1px
        }

        .custom-control-label::after {
            position: absolute;
            top: .15625rem;
            left: -1.5rem;
            display: block;
            width: 1rem;
            height: 1rem;
            content: "";
            background: no-repeat 50%/50% 50%
        }

    .custom-checkbox .custom-control-label::before {
        border-radius: .75rem
    }

    .bg-white {
        background-color: #fff !important
    }

    .d-flex {
        display: flex !important
    }

    .justify-content-center {
        justify-content: center !important
    }

    .justify-content-between {
        justify-content: space-between !important
    }

    .align-items-center {
        align-items: center !important
    }

    .h-100 {
        height: 100% !important
    }

    .mb-1 {
        margin-bottom: .25rem !important
    }

    .ml-1 {
        margin-left: .25rem !important
    }

    .mb-2 {
        margin-bottom: .5rem !important
    }

    .mb-3 {
        margin-bottom: 1rem !important
    }

    .mt-4 {
        margin-top: 1.5rem !important
    }

    .mb-4 {
        margin-bottom: 1.5rem !important
    }

    .text-center {
        text-align: center !important
    }

    .text-white {
        color: #fff !important
    }

    .text-primary {
        color: #fe634e !important
    }

    * {
        outline: none;
        padding: 0
    }

        *::after {
            margin: 0;
            padding: 0
        }

        *::before {
            margin: 0;
            padding: 0
        }

    body {
        overflow-x: hidden;
        height: 100%;
        position: relative;
        max-width: 100%;
        font-size: 1rem
    }

    @@media only screen and (max-width:991px) {
        body {
            font-size: .875rem
        }
    }

    a {
        color: #7e7e7e
    }
</style>

<div class="col-md-6">
    <div class="authincation-content">
        <div class="row no-gutters">
            <div class="col-xl-12">
                <div class="auth-form">
                    <div class="text-center mb-3">
                        <a href="javascript:void(0);">
                            <h1 style="color: white;">MetrixPe</h1>
                            @*<img src="@Url.Content("~/images/logodeca/logosvg_blanco.svg")"
                                 alt="Logo" width="300" height="80">*@
                        </a>
                    </div>
                    <h3 class="text-center mb-4 font-weight-bold" style="color: #00514E; ">Inicia sesión</h3>
                    @using (Html.BeginForm("Login", "Account", FormMethod.Post, new { @class = "mt-48", @id = "form-login", role = "form" }))
                    {
                        @Html.AntiForgeryToken()
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        @Html.HiddenFor(m => m.UrlReturn)

                        if (Model != null && Model.codigoHttp == HttpStatusCode.BadRequest)
                        {
                            <div class="alert alert-warning alert-dismissible fade show">
                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                                @*<strong>Advertencia!</strong>*@ @Model.Error
                                <button type="button" class="close h-100" data-dismiss="alert" aria-label="Close">
                                    <span>x</span>
                                </button>
                            </div>
                        }
                        else if (Model != null && Model.codigoHttp > 0)
                        {
                            <div class="alert alert-danger alert-dismissible fade show">
                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
                                @*<strong>Error!</strong>*@ @Model.Error
                                <button type="button" class="close h-100" data-dismiss="alert" aria-label="Close">
                                    <span>x</span>
                                </button>
                            </div>
                        }
                        <div class="form-group">
                            <label class="mb-1 text-white"><strong>Usuario</strong></label>
                            @Html.TextBoxFor(m => m.Username, new
                            {
                                @class = "form-control",
                                @tabindex = "1",
                                @autofocus = "autofocus",
                                @placeholder = "hello@example.com"
                            })
                            @Html.ValidationMessageFor(m => m.Username, "", new { @class = "text-danger" })
                        </div>
                        <div class="form-group">
                            <label class="mb-1 text-white"><strong>Clave</strong></label>
                            @Html.PasswordFor(m => m.Password, new { @required = "", @class = "form-control", @tabindex = "2" })
                            @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                        </div>
                        <div class="form-row d-flex justify-content-between mt-4 mb-2">
                            <div class="form-group">
                                <div class="custom-control custom-checkbox ml-1 text-white">
                                    <input type="checkbox" class="custom-control-input" id="basic_checkbox_1">
                                    <label class="custom-control-label" for="basic_checkbox_1">Recordarme</label>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="btn bg-success text-white btn-block" id="btn-iniciar-sesion">Iniciar sesión</button>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@section scriptlogin1 {
    @Scripts.Render("~/bundles/admin/vendor/jqueryval")
    @Scripts.Render("~/bundles/admin/vendor/jqueryvalunobtrusive")
    <script>
        $("#form-login").submit(function (e) {
            e.preventDefault();
            if ($(this).valid()) {
                $("#btn-iniciar-sesion").attr("disabled", "disabled");
                $("#btn-iniciar-sesion").text("Cargando...");
                $(this)[0].submit();
            }

        });
    </script>
}